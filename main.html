<!DOCTYPE html>
<html>
<head>
  <title>My Private Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  Dashboard Pribadi
</header>

<div class="container">

  <div class="card">
    <h3>ğŸ“Š Status Hari Ini</h3>
    <p id="date"></p>
    <input id="statusToday" placeholder="Status / fokus hari ini"
style="width:100%;padding:8px;border-radius:6px;border:1px solid #334155;
background:#020617;color:#e5e7eb;">
<button onclick="saveStatus()">Simpan Status</button>
<p id="statusSaved"></p>
  </div>

  <div class="card">
    <h3>ğŸ““ Jurnal Harian</h3>
    <textarea id="journal" placeholder="Tulis isi pikiran kamu di sini..."></textarea>
    <button onclick="saveJournal()">Simpan</button>
    <p id="saved"></p>
  </div>

  <div class="card">
  <h3>ğŸ“… Agenda</h3>

  <input id="agendaText" placeholder="Judul agenda" style="width:100%;padding:8px;">
  <br><br>

  <input type="datetime-local" id="agendaTime" style="width:100%;padding:8px;">

  <button onclick="addAgenda()">Tambah</button>

  <ul id="agendaList"></ul>
</div>

  <div class="card">
    <button class="logout" onclick="logout()">Logout</button>
  </div>

</div>

<script>
  if (sessionStorage.getItem("auth") !== "true") {
    window.location.href = "index.html";
  }

  document.getElementById("date").innerText =
    new Date().toLocaleDateString("id-ID", {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric"
    });

  document.getElementById("journal").value =
    localStorage.getItem("journal") || "";

  function saveJournal() {
    localStorage.setItem(
      "journal",
      document.getElementById("journal").value
    );
    document.getElementById("saved").innerText = "Tersimpan âœ”";
  }

  function logout() {
    sessionStorage.clear();
    window.location.href = "index.html";
  }

  let agendas = JSON.parse(localStorage.getItem("agendas")) || [];

function renderAgenda() {
  const list = document.getElementById("agendaList");
  list.innerHTML = "";

  agendas.forEach((a, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      ${a.text}<br>
      <small>${new Date(a.time).toLocaleString("id-ID")}</small><br>
      <button onclick="setAlarm('${a.text}','${a.time}')">â° Set Alarm</button>
      <button onclick="deleteAgenda(${i})">âŒ</button>
    `;
    list.appendChild(li);
  });

  localStorage.setItem("agendas", JSON.stringify(agendas));
}

function addAgenda() {
  const text = document.getElementById("agendaText").value;
  const time = document.getElementById("agendaTime").value;
  if (!text || !time) return;

  agendas.push({ text, time });
  renderAgenda();

  document.getElementById("agendaText").value = "";
  document.getElementById("agendaTime").value = "";
}

function deleteAgenda(i) {
  agendas.splice(i, 1);
  renderAgenda();
}

function setAlarm(title, time) {
  const start = new Date(time).toISOString().replace(/-|:|\.\d+/g,"");
  const end = start;

  const url = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(title)}&dates=${start}/${end}`;

  window.open(url, "_blank");
}

renderAgenda();

  // load status
document.getElementById("statusToday").value =
  localStorage.getItem("statusToday") || "";

function saveStatus() {
  localStorage.setItem(
    "statusToday",
    document.getElementById("statusToday").value
  );
  document.getElementById("statusSaved").innerText = "Status tersimpan âœ”";
}
</script>

</body>
</html>
