<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Google Agenda Elegan</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGIN -->
<div id="loginDiv">
  <h2>Login</h2>
  <input type="password" id="passwordInput" placeholder="Masukkan password">
  <button onclick="checkPassword()">Login</button>
  <p id="loginMsg"></p>
</div>

<!-- DASHBOARD -->
<div id="mainDiv" style="display:none;">
  <div class="container">

    <!-- PILIH TANGGAL -->
    <div class="card col-12">
      <h3>üìÖ Pilih Tanggal</h3>
      <input type="date" id="datePicker">
      <button onclick="loadDate()">Load Tanggal</button>
    </div>

    <!-- AGENDA HARI INI -->
    <div class="card col-12">
      <h3>Agenda Hari Ini</h3>
      <div id="agendaSlots"></div>
      <button onclick="addSlot()">‚ûï Tambah Slot Agenda</button>
    </div>

  </div>
</div>

<script>
// ===== LOGIN =====
const PASSWORD = "Uky@2026!aman";
function checkPassword() {
  const val = document.getElementById("passwordInput").value;
  if(val===PASSWORD){
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("mainDiv").style.display="block";
  } else {
    document.getElementById("loginMsg").innerText="Password salah!";
  }
}

// ===== LocalStorage SETUP =====
let agendaData = JSON.parse(localStorage.getItem("MiniAgenda")) || {};
let currentDate = null;

// ===== LOAD TANGGAL =====
function loadDate(){
  const d = document.getElementById("datePicker").value;
  if(!d) return alert("Pilih tanggal dulu!");
  currentDate = d;
  renderSlots();
}

// ===== RENDER SLOT =====
function renderSlots(){
  const container = document.getElementById("agendaSlots");
  container.innerHTML="";
  const slots = agendaData[currentDate] || [];
  slots.forEach((slot, index)=>{
    createSlotElement(slot, index);
  });
}

// ===== CREATE SLOT ELEMENT =====
function createSlotElement(slotData, index){
  const container = document.getElementById("agendaSlots");
  const div = document.createElement("div");
  div.className="slot";

  div.innerHTML=`
    <input type="text" placeholder="Judul Kegiatan" value="${slotData.title || ''}" class="slotTitle">
    <textarea placeholder="Catatan / Deskripsi">${slotData.notes || ''}</textarea>
    <input type="time" value="${slotData.time || ''}" class="slotTime">
    <button class="saveBtn">üíæ Simpan Slot</button>
    <button class="deleteBtn">‚ùå Hapus Slot</button>
  `;

  // AUTO EXPAND TEXTAREA
  const textarea = div.querySelector("textarea");
  textarea.addEventListener("input", e=>{
    e.target.style.height = "auto";
    e.target.style.height = (e.target.scrollHeight) + "px";
  });
  textarea.style.height = (textarea.scrollHeight)+"px";

  // SAVE BUTTON
  div.querySelector(".saveBtn").onclick = ()=>{
    const title = div.querySelector(".slotTitle").value;
    const notes = div.querySelector("textarea").value;
    const time = div.querySelector(".slotTime").value;
    agendaData[currentDate][index] = {title, notes, time};
    localStorage.setItem("MiniAgenda", JSON.stringify(agendaData));
    alert("Slot tersimpan ‚úî");
  };

  // DELETE BUTTON
  div.querySelector(".deleteBtn").onclick = ()=>{
    agendaData[currentDate].splice(index, 1);
    localStorage.setItem("MiniAgenda", JSON.stringify(agendaData));
    renderSlots();
  };

  container.appendChild(div);
}

// ===== ADD SLOT BARU =====
function addSlot(){
  if(!currentDate) return alert("Pilih tanggal dulu!");
  if(!agendaData[currentDate]) agendaData[currentDate] = [];
  agendaData[currentDate].push({title:"", notes:"", time:""});
  localStorage.setItem("MiniAgenda", JSON.stringify(agendaData));
  renderSlots();
}
</script>

</body>
</html>
