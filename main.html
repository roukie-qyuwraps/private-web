<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Google Agenda</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGIN -->
<div id="loginDiv">
  <h2>Login</h2>
  <input type="password" id="passwordInput" placeholder="Masukkan password">
  <button onclick="checkPassword()">Login</button>
  <p id="loginMsg"></p>
</div>

<!-- MAIN DASHBOARD -->
<div id="mainDiv" style="display:none;">
  <div class="container">

    <!-- PILIH TANGGAL -->
    <div class="card col-12">
      <h3>üìÖ Pilih Tanggal</h3>
      <input type="date" id="datePicker">
      <button onclick="loadDate()">Load Tanggal</button>
    </div>

    <!-- AGENDA HARI INI -->
    <div class="card col-12">
      <h3>Agenda Hari Ini</h3>
      <div id="agendaSlots"></div>
      <button onclick="addSlot()">‚ûï Tambah Slot Agenda</button>
    </div>

  </div>
</div>

<script>
// ===== LOGIN =====
const PASSWORD = "Uky@2026!aman";
function checkPassword() {
  const val = document.getElementById("passwordInput").value;
  if(val===PASSWORD){
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("mainDiv").style.display="block";
  } else {
    document.getElementById("loginMsg").innerText="Password salah!";
  }
}

// ===== AGENDA SYSTEM =====
let agendaFiles = JSON.parse(localStorage.getItem("agendaFiles")) || {};
let currentDate = null;

function loadDate(){
  const d = document.getElementById("datePicker").value;
  if(!d) return alert("Pilih tanggal dulu!");
  currentDate = d;
  renderSlots();
}

function renderSlots(){
  const container = document.getElementById("agendaSlots");
  container.innerHTML="";
  if(!agendaFiles[currentDate]) agendaFiles[currentDate]=[];

  agendaFiles[currentDate].forEach((slot,i)=>{
    const div = document.createElement("div");
    div.className="slot";

    div.innerHTML=`
      <input type="text" placeholder="Judul Kegiatan" value="${slot.title || ''}" class="slotTitle">
      <textarea placeholder="Catatan / Deskripsi">${slot.notes || ''}</textarea>
      <input type="text" placeholder="Attachment / Link" value="${slot.attachment || ''}" class="slotAttachment">
      <input type="time" value="${slot.time || ''}" class="slotTime">
      <button onclick="saveSlot(${i})">üíæ Simpan Slot</button>
      <button onclick="deleteSlot(${i})">‚ùå Hapus Slot</button>
    `;
    container.appendChild(div);
  });
}

// Tambah slot baru
function addSlot(){
  if(!currentDate) return alert("Pilih tanggal dulu!");
  agendaFiles[currentDate].push({title:"",notes:"",attachment:"",time:""});
  renderSlots();
}

// Save slot
function saveSlot(i){
  const container = document.getElementById("agendaSlots");
  const slotDiv = container.children[i];
  const title = slotDiv.querySelector(".slotTitle").value;
  const notes = slotDiv.querySelector("textarea").value;
  const attachment = slotDiv.querySelector(".slotAttachment").value;
  const time = slotDiv.querySelector(".slotTime").value;

  agendaFiles[currentDate][i] = {title,notes,attachment,time};
  localStorage.setItem("agendaFiles",JSON.stringify(agendaFiles));
  alert("Slot tersimpan ‚úî");
}

// Hapus slot
function deleteSlot(i){
  agendaFiles[currentDate].splice(i,1);
  localStorage.setItem("agendaFiles",JSON.stringify(agendaFiles));
  renderSlots();
}
</script>

</body>
</html>
