<!DOCTYPE html>
<html>
<head>
  <title>My Private Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  Dashboard Pribadi
</header>

<div class="container">

  <div class="card col-6">
    <h3>Status Hari Ini</h3>
    <!-- status -->
  </div>

  <div class="card col-6">
    <h3>Agenda</h3>
    <!-- agenda -->
  </div>

  <div class="card col-4">
    <h3>Jurnal</h3>
    <!-- jurnal -->
  </div>

  <div class="card col-4">
    <h3>Ringkasan</h3>
    <!-- weekly -->
  </div>

  <div class="card col-4">
    <h3>Catatan</h3>
    <!-- bebas -->
  </div>

  <div class="card col-6">
  <h3>ğŸ“ File Box</h3>

  <input id="fileName" placeholder="Nama file / folder">
  <input id="fileLink" placeholder="Link (Drive / lokal)">
  <button onclick="addFile()">Tambah</button>

  <ul id="fileList"></ul>

    <div class="card col-6">
  <h3>ğŸ“ File Box</h3>

  <button onclick="addBox()">â• Tambah Box</button>

  <div id="fileList"></div>
</div>
  
<script>
  let files = JSON.parse(localStorage.getItem("files")) || [];

function renderFiles() {
  const ul = document.getElementById("fileList");
  ul.innerHTML = "";

  files.forEach((f, i) => {
    const li = document.createElement("li");
    li.innerHTML = `
      ğŸ“„ ${f.name} 
      <a href="${f.link}" target="_blank">[Open]</a> 
      <button onclick="deleteFile(${i})">âŒ</button>
    `;
    ul.appendChild(li);
  });

  localStorage.setItem("files", JSON.stringify(files));
}

// Tambah file baru
function addFile() {
  const name = document.getElementById("fileName").value;
  const linkInput = document.getElementById("fileLink").value;
  const fileInput = document.getElementById("fileUpload").files[0];

  if (!name && !fileInput && !linkInput) return alert("Isi minimal nama atau pilih file/link");

  if (fileInput) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const dataUrl = e.target.result; // simpan file lokal sebagai base64
      files.push({ name: name || fileInput.name, link: dataUrl });
      renderFiles();
    };
    reader.readAsDataURL(fileInput);
  } else {
    files.push({ name, link: linkInput });
    renderFiles();
  }

  // Reset input
  document.getElementById("fileName").value = "";
  document.getElementById("fileLink").value = "";
  document.getElementById("fileUpload").value = "";
}

function deleteFile(i) {
  files.splice(i, 1);
  renderFiles();
}

// render pertama kali
renderFiles();

  // Ambil data box dari localStorage
let boxes = JSON.parse(localStorage.getItem("boxes")) || [];

// Render semua box
function renderBoxes() {
  const container = document.getElementById("fileList"); // pastikan ID sama dengan div box
  container.innerHTML = "";

  boxes.forEach((b, i) => {
    // box content editable
    const div = document.createElement("div");
    div.className = "file-box";
    div.contentEditable = true;
    div.innerText = b.content || "";
    
    // simpan otomatis saat blur (keluar dari box)
    div.onblur = () => {
      boxes[i].content = div.innerText;
      localStorage.setItem("boxes", JSON.stringify(boxes));
    };

    // tombol hapus
    const btn = document.createElement("button");
    btn.innerText = "âŒ";
    btn.onclick = () => {
      boxes.splice(i, 1);
      renderBoxes();
    };
    btn.style.marginLeft = "8px";

    // wrapper supaya rapi
    const wrapper = document.createElement("div");
    wrapper.style.display = "flex";
    wrapper.style.alignItems = "center";
    wrapper.style.marginBottom = "6px";

    wrapper.appendChild(div);
    wrapper.appendChild(btn);
    container.appendChild(wrapper);
  });

  localStorage.setItem("boxes", JSON.stringify(boxes));
}

// Tambah box baru
function addBox() {
  boxes.push({ content: "" });
  renderBoxes();
}

// render pertama kali
renderBoxes();
</script>

</body>
</html>
