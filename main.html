<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Personal</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGIN SIMPLE -->
<div id="loginDiv">
  <h2>Login</h2>
  <input type="password" id="passwordInput" placeholder="Masukkan password">
  <button onclick="checkPassword()">Login</button>
  <p id="loginMsg"></p>
</div>

<!-- FILE SELECTION / DASHBOARD -->
<div id="mainDiv" style="display:none;">
  <div class="card col-12">
    <h3>ğŸ“‚ Pilih atau Buat File</h3>
    <input id="fileTitle" placeholder="Judul File Baru">
    <button onclick="createFile()">â• Buat File Baru</button>
    <div id="fileListSidebar"></div>
  </div>

  <div class="container">

    <!-- STATUS -->
    <div class="card col-6">
      <h3>Status Hari Ini</h3>
      <input id="statusToday" placeholder="Status / fokus hari ini">
      <button onclick="saveCurrentFile()">ğŸ’¾ Simpan</button>
    </div>

    <!-- AGENDA -->
    <div class="card col-6">
      <h3>Agenda</h3>
      <input id="agendaText" placeholder="Judul agenda">
      <input type="datetime-local" id="agendaTime">
      <button onclick="addAgenda()">Tambah Agenda</button>
      <ul id="agendaList"></ul>
    </div>

    <!-- JURNAL -->
    <div class="card col-4">
      <h3>Jurnal</h3>
      <textarea id="journal" placeholder="Tulis pikiran kamu..."></textarea>
    </div>

    <!-- FILE BOX EDITABLE -->
    <div class="card col-8">
      <h3>ğŸ“ Catatan / Box</h3>
      <button onclick="addBox()">â• Tambah Box</button>
      <div id="fileList"></div>
    </div>

  </div>
</div>

<script>
// ===== LOGIN =====
const PASSWORD = "Uky@2026!aman";
function checkPassword() {
  const val = document.getElementById("passwordInput").value;
  if(val===PASSWORD){
    document.getElementById("loginDiv").style.display="none";
    document.getElementById("mainDiv").style.display="block";
    loadFileList();
  } else {
    document.getElementById("loginMsg").innerText="Password salah!";
  }
}

// ===== FILE SYSTEM =====
let currentFileTitle = null;
let files = JSON.parse(localStorage.getItem("files")) || {};

function loadFileList() {
  const container = document.getElementById("fileListSidebar");
  container.innerHTML="";
  Object.keys(files).forEach(title=>{
    const btn = document.createElement("button");
    btn.innerText=title;
    btn.onclick = ()=>loadFile(title);
    container.appendChild(btn);
  });
}

function createFile() {
  const title = document.getElementById("fileTitle").value.trim();
  if(!title) return alert("Isi judul file dulu!");
  if(files[title]) return alert("File sudah ada!");
  files[title] = {status:"",journal:"",agenda:[],boxes:[]};
  localStorage.setItem("files",JSON.stringify(files));
  loadFileList();
  loadFile(title);
  document.getElementById("fileTitle").value="";
}

function loadFile(title){
  currentFileTitle = title;
  const f = files[title];
  document.getElementById("statusToday").value = f.status||"";
  document.getElementById("journal").value = f.journal||"";
  renderAgenda();
  renderBoxes();
}

// ===== SAVE CURRENT FILE =====
function saveCurrentFile(){
  if(!currentFileTitle) return alert("Pilih file dulu!");
  const f = files[currentFileTitle];
  f.status = document.getElementById("statusToday").value;
  f.journal = document.getElementById("journal").value;
  localStorage.setItem("files",JSON.stringify(files));
  alert("Tersimpan âœ”");
}

// ===== AGENDA =====
function renderAgenda(){
  if(!currentFileTitle) return;
  const list = document.getElementById("agendaList");
  list.innerHTML="";
  const ag = files[currentFileTitle].agenda;
  ag.forEach((a,i)=>{
    const li = document.createElement("li");
    li.innerHTML=`${a.text} <br> <small>${new Date(a.time).toLocaleString("id-ID")}</small> <button onclick="deleteAgenda(${i})">âŒ</button>`;
    list.appendChild(li);
  });
}

function addAgenda(){
  if(!currentFileTitle) return alert("Pilih file dulu!");
  const text = document.getElementById("agendaText").value;
  const time = document.getElementById("agendaTime").value;
  if(!text||!time) return;
  files[currentFileTitle].agenda.push({text,time});
  localStorage.setItem("files",JSON.stringify(files));
  document.getElementById("agendaText").value="";
  document.getElementById("agendaTime").value="";
  renderAgenda();
}

function deleteAgenda(i){
  files[currentFileTitle].agenda.splice(i,1);
  localStorage.setItem("files",JSON.stringify(files));
  renderAgenda();
}

// ===== FILE BOX =====
function renderBoxes(){
  if(!currentFileTitle) return;
  const container = document.getElementById("fileList");
  container.innerHTML="";
  const boxArr = files[currentFileTitle].boxes;
  boxArr.forEach((b,i)=>{
    const div=document.createElement("div");
    div.className="file-box";
    div.contentEditable=true;
    div.innerText=b.content||"";
    div.onblur=()=>{ boxArr[i].content=div.innerText; localStorage.setItem("files",JSON.stringify(files)); };

    const btn=document.createElement("button");
    btn.innerText="âŒ";
    btn.onclick=()=>{ boxArr.splice(i,1); renderBoxes(); };

    const wrapper=document.createElement("div");
    wrapper.style.display="flex";
    wrapper.style.alignItems="center";
    wrapper.style.marginBottom="6px";

    wrapper.appendChild(div);
    wrapper.appendChild(btn);
    container.appendChild(wrapper);
  });
}

function addBox(){
  if(!currentFileTitle) return alert("Pilih file dulu!");
  files[currentFileTitle].boxes.push({content:""});
  localStorage.setItem("files",JSON.stringify(files));
  renderBoxes();
}
</script>
</body>
</html>
